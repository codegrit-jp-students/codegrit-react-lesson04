# チャレンジ4

## 目的

- getDerivedStateFromPropsを利用する
- componentDidMOuntを利用する

## チャレンジの取り組み方

1. スターターファイルのリポジトリを、フォークして自分のGitHubアカウントにリポジトリを作りましょう。
2. マイルストーンごとに要件に合うようにファイルを編集していきます。
3. 分からない部分があれば、テキストを復習して、再度チャレンジしてみましょう。
4. 再チャレンジしてしばらく考えても分からない場合はチャットでメンターに質問しましょう。
5. 完了したら、GitHubリポジトリをメンターにシェアしてください。(質問時に既にシェアしている場合は、レビューを直接依頼しましょう。)
6. メンターから課題レビューが届きます。
7. ビデオチャットの際は、分からない点を更に突っ込んで聞いたり、より良い書き方を聞いてみましょう。

## 概要

このチャレンジでは、チャレンジ3で作成したインスタ風カードを更にカスタマイズし、2枚のカードを表示出来るようにしましょう。


## 完成イメージ

![react_ch04_image](https://firebasestorage.googleapis.com/v0/b/codegrit-images.appspot.com/o/codegrit-react%2FLesson04%2Fchallenge%2Fcodegrit-react-ch04-image.gif?alt=media&token=af581e34-da00-45ff-a31c-5da0079f035a)

## スターターファイル

- [codegrit-jp-students/react-ch04-starter](https://github.com/codegrit-jp-students/codegrit-react-ch04-starter)

上記のURL先のリポジトリをフォークして、コードを書き進めて行きましょう。

## マイルストーン１

### 要件

- データを取得する

`src/CardDataUtils.js`内に定義されているfetchDataファンクションを利用して、`src/instaCard/index.js`のコンポーネントのマウント時にデータを取得しましょう。データ取得中はstateに`isLoading: true`のようにデータを与えてrender内でローディング中か判断出来るようにしてください。初期ステートを以下のように設定しても構いません。

```js
state = {
  theme: 'light',
  chosenId: 1,
  isLoading: true
}
```

- データを表示する

取得したデータを各コンポーネントに渡して、データを基にカードを表示するようにしましょう。必要なPropTypesを各コンポーネントに追加することも忘れないでください。

- ローディング時に表示する空のボックス`EmptyBox`コンポーネントを作成する

ボックスは簡単なもので幅と高さ、そして周りの`border`が、インスタカードと同じであれば中身は何もなくて構いません。データのローディング中にはstateのisLoadingプロパティが`true`となるようにしてローディング中かどうか判断します。

- ローディング画像を表示する。

ローディング中にはカード内にはデータを表示せず、`images/loading.svg`にあるローディング画像をちょうどボックスのちょうど中央に表示するようにしましょう。(ヒント: インラインスタイルまたはindex.cssを編集し、Flexboxを利用します。)

## マイルストーン2

ここでは、画像1,2の各リンクがクリックされた際に異なる2つのデータを表示するようにします。

### 要件

- onSwitchCardファンクションを実装する

onSwitchCardファンクションを実装して、`CardSwither.js`によって表示されたリンクをクリックされた際にデータを読み込むようにしましょう。

リンクによって数字の1または2のデータを渡して、1ならcardDataOne、2ならcardDataTwoのデータを取得して表示を変更します。

また、表示すべきデータが変わらない場合は何も起きないようにしましょう。(画像1が選ばれている状態で、再度画像1がクリックされた場合など)

## マイルストーン3

最後に、componentDidUpdateを利用してみましょう。このインスタカードにはコメントボックスがありますが、今回入力中を想定するために最初は、"実はコメントを書いているところです。"というコメントが入っています。これを表示するデータが変わった時に空にします。

- loadedOnceステートを加える。

`src/instaCard/index.js`の初期ステートに`loadedOnce: false`を加えてください。最初のコンポーネントマウント後のデータ取得が終えたら`loadedOnce: true`に変更します。

- コメントボックスを画像が切り替わったときに空にする

カードの内容が切り替わった際に、componentDidUpdateを利用してコメントを空にするようにしましょう。

## 評価

課題の後、以下の２つについてメンターにフィードバックをお願いします。

1. 要件のカバー度: 1.全く出来なかった 2.ほとんど出来なかった 3. 半分ほどは出来た 4.8割ほどは出来た 5. 全部出来た
2. 難易度: 1. とても難しかった 2. 難しかった 3. ちょうど良かった 4. 簡単だった 5. とても簡単だった
